<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
		<link rel="Stylesheet" href="/theme/css/styles.css">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss" />
		<link href="/rainbow/themes/zenburnesque.css" rel="stylesheet" type="text/css" media="screen">
		<title>{{.SiteName}}: {{.Post.Title}}</title>
	</head>
	<body>

		<header id="header">
			<a href="/"><img src="/theme/img/header.png" width="100%" alt=""></a>
		</header>

		{{with .Post}}
		<section id="posts">

			<article>
				<div class="post">
					<header>
						<p>{{printf "%04d" .PublishDate.Year}}-{{printf "%02d" .PublishDate.Month}}-{{printf "%02d" .PublishDate.Day}}</p>
						<h1><a href="/posts/{{.Url}}">{{.Title}}</a></h1>
					</header>
					<div class="content">
						{{.Body}}
					</div>
					<footer>
						{{range .Tags}} <a href="/tags/{{.}}">{{.}}</a> {{end}}
					</footer>
				</div>
			</article>

		</section>

		<section id="comments">
			<header>
				<h2>Comments</h2>
			</header>

			{{with .Comments}}
			{{range .}}
			<article>
				<header>
					<h3>{{.Author}} on {{printf "%04d" .Date.Year}}-{{printf "%02d" .Date.Month}}-{{printf "%02d" .Date.Day}} at {{printf "%02d" .Date.Hour}}:{{printf "%02d" .Date.Minute}} said:</h3>
				</header>
				<div class="content">
					{{.Body}}
				</div>
			</article>
			{{end}}
			{{end}}

			<article>
				<div id="epiceditor"></div>
				<div>
					<form method="post" action="/posts/{{.Url}}">
						<input type="submit" value="Submit">
					</form>
				</div>
			</article>
			
		</section>
		{{end}}

		<footer id="footer">
			<form method="get" id="searchForm" action="/">
				<input type="text" name="search" id="search" placeholder="Search">
				<input type="submit" value="Search" class="searchSubmit">
			</form>
			<nav>
				<ul>
					<li><a href="/archive">Archive</a></li>
					<li><a href="/tags">Tags</a></li>
					<li><a href="/rss">RSS Feed</a></li>
				</ul>
			</nav>
			<p>Powered by <a href="https://bitbucket.org/ant512/gobble">Gobble</a>.</p>
		</footer>

		<script src="/epiceditor/js/epiceditor.min.js"></script>
		<script src="/rainbow/js/rainbow.min.js"></script>
		<script src="/rainbow/js/language/c.js"></script>
		<script src="/rainbow/js/language/csharp.js"></script>
		<script src="/rainbow/js/language/css.js"></script>
		<script src="/rainbow/js/language/generic.js"></script>
		<script src="/rainbow/js/language/go.js"></script>
		<script src="/rainbow/js/language/html.js"></script>
		<script src="/rainbow/js/language/java.js"></script>
		<script src="/rainbow/js/language/javascript.js"></script>
		<script src="/rainbow/js/language/python.js"></script>
		<script src="/rainbow/js/language/shell.js"></script>

		<script>
			var opts = {
				container: 'epiceditor',
				basePath: '/epiceditor',
				clientSideStorage: true,
				localStorageName: 'epiceditor',
				useNativeFullscreen: true,
				parser: marked,
				file: {
					name: 'epiceditor',
					defaultContent: '',
					autoSave: 100
				},
				theme: {
					base:'/themes/base/epiceditor.css',
					preview:'/themes/preview/preview-dark.css',
					editor:'/themes/editor/epic-dark.css'
				},
				focusOnLoad: false,
				shortcut: {
					modifier: 18,
					fullscreen: 70,
					preview: 80
				}
			};
			var editor = new EpicEditor(opts).load();
		</script>
	</body>
</html>